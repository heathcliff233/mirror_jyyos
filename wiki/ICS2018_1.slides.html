<html>
  <Head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    
    

    <link rel="stylesheet" href="../static/css/fonts/crmison.css"/>
    <link rel="stylesheet" href="../static/css/fonts/fira_code.css"/>
    <link rel="stylesheet" href="../static/css/fonts/ptsans.css"/>
    <link rel="stylesheet" href="../static/css/katex.min.css"/>
    <link rel="stylesheet" href="../static/css/wiki.css"/>
    <link rel="stylesheet" href="../static/css/codehilite.css"/>

    <script src="../static/js/jquery.min.js"></script>
    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <script src="../static/js/katex.min.js"></script>
    
<link rel="stylesheet" href="../static/css/reveal.css"/>
<link rel="stylesheet" href="../static/css/reveal-slides.css"/>


    <title>æ¦‚è¿°</title>
  </Head>
  <body>
   
   

<div class="reveal">
  <div class="slides">
    <section>
<section>
<div class="slide-container"><div class=""><h1 id="_1">æ¦‚è¿°</h1>
<p>è’‹ç‚å²© <a href="mailto:jyy@nju.edu.cn">jyy@nju.edu.cn</a>
<img width="200px" class="float-right" src="http://moon.nju.edu.cn/people/yyjiang/img/yanyan-portrait.jpg"></img></p>
<ul>
<li>ä¸´æ—¶å·¥ï¼Œè®¡ç®—æœºè½¯ä»¶ç ”ç©¶æ‰€ (ICS)</li>
<li>JSOI/å—äº¬å¤§å­¦ACM-ICPCé›†è®­é˜Ÿæ•™ç»ƒ<ul>
<li>2018 ACM SIGSOFT Distinguished Paper Award, 2016 å—äº¬å¤§å­¦å­¦ç”Ÿå¹´åº¦äººç‰©, 2009 ACM-ICPC WF 49th Place</li>
</ul>
</li>
<li>è¯¾ç¨‹ä¸»é¡µï¼š<a href="http://moon.nju.edu.cn/~jyywiki">http://moon.nju.edu.cn/~jyywiki</a></li>
</ul>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>ã€Šè®¡ç®—æœºç³»ç»ŸåŸºç¡€ã€‹ä¹ é¢˜è¯¾ï¼šè´Ÿè´£ä¸€åˆ‡ç»ƒä¹ ã€è¯¾å ‚éƒ¨åˆ†çš„è®²è§£å’Œè¡¥å……ã€‚è™½ç„¶è¯´æ˜¯è¡¥å……ï¼Œä½†å¯¹å¤§å®¶æ¥è¯´æœ€é‡è¦çš„æŠ€æœ¯è¿˜æ˜¯ï¼š</p>
<ul>
<li>STFW, RTFM, RTFSC</li>
</ul>
<blockquote>
<p>æˆ‘ä¸æ˜¯PAçš„ä½œè€…ï¼Œæˆ‘æ˜¯yzhçš„åœ°ä¸Šä»£è¨€äºº</p>
</blockquote></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="pa0">ğŸ“¢ å…¬å‘Šï¼šPA0</h1>
<p>æäº¤æˆªæ­¢æ—¥æœŸ2018/09/09 23:59:59</p>
<p>ä½ è‚¯å®šå¾ˆå¥½å¥‡ï¼šå•¥ä¹Ÿä¸è¦åšä¸ºä»€ä¹ˆè¿˜è¦æäº¤ä¸ªç©ºçš„ï¼Ÿ</p>
<blockquote>
<p>æ¡†æ¶ä»£ç¢¼çš„å£“ç¸®åŒ…, å’Œpdfæ–‡æª”</p>
<p>ç¬¬ä¸€æ¬¡æäº¤æœƒæœ‰ä¸€å¤§å †äººä¸ç¬¦åˆè¦ç¯„</p>
<p>å¯ä»¥æå‰å™´ä¸€ä¸‹</p>
<p>â€”â€” yzh</p>
</blockquote></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>Q: ç‚ºä»€éº¼èª²å ‚slideå’ŒPAè¬›ç¾©æ”¾åœ¨å…©å€‹ä¸åŒçš„åœ°æ–¹ï¼Ÿ</p>
<p>A: æ˜¯æœ‰å…¶ä»–å­¸æ ¡ä¹Ÿæœƒè·Ÿé€²PAçš„æ–°ç‰ˆæœ¬, æ‰€ä»¥PAè¬›ç¾©æ”¾åœ¨gitbookä¸Šä¸€ç›´å°å¤–é–‹æ”¾</p></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="_1">æœ¬æ¬¡è¯¾å†…å®¹</h1>
<ul>
<li>å¤ä¹ ï¼šCè¯­è¨€<ul>
<li>Cè¯­è¨€çš„è¯­æ³•å’Œè¯­ä¹‰</li>
<li>YEMU</li>
<li>ç¼–ç¨‹å’Œæµ‹è¯•</li>
</ul>
</li>
</ul></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>å¯¹ä¸èµ·ï¼Œæ²¡æœ‰è£…æœºæŒ‡å¯¼ï¼ŒSTFWï¼</p></div></div>
</section>
</section>

<section>
<div class="slide-container"><div class="center middle"><h1 id="hello-c">Hello, Cè¯­è¨€</h1></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="hello-c-world">Hello, C World!</h1>
<p>æ¬¢è¿ï¼å¤§å®¶æƒ³å¿…å·²ç»æ˜¯(é¢å‘OJç¼–ç¨‹)çš„C/C++é«˜æ‰‹äº†ï¼</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">"Hello, C World!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>ICSè¿™é—¨è¯¾çš„åŸºæœ¬ç›®æ ‡ï¼š(1) ç†è§£ç¨‹åºæ˜¯å¦‚ä½•åœ¨è®¡ç®—æœºä¸Šè¿è¡Œçš„ï¼›(2) åšä¸€ä¸ªç›¸å¯¹å¤§ï¼Œå¹¶ä¸”non-trivialçš„ç³»ç»Ÿè½¯ä»¶ã€‚</p>
<p>æœ¬è¯¾ç¨‹é€‰æ‹©<strong>Cè¯­è¨€</strong>ä½œä¸ºå®˜æ–¹è¯­è¨€ï¼Œquizï¼š</p>
<ul>
<li><code>argc</code>æ˜¯ä»€ä¹ˆï¼Ÿ<code>argv</code>æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li><code>printf</code>æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</li>
<li>ä¸<code>return 0</code>å¯ä»¥å—ï¼Ÿ</li>
</ul></div></div>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c1main">Cè¯­è¨€å¤ä¹ 1ï¼š<code>main</code>å‡½æ•°</h1>
<p>æ‰€æœ‰Cç¨‹åºéƒ½æ˜¯ä»<code>main</code>å¼€å§‹æ‰§è¡Œçš„ï¼Œé‚£è°æ‰§è¡Œçš„mainå‘¢ï¼Ÿ</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[]);</span>
</pre></div>

<ul>
<li>argc (argument count): å‚æ•°ä¸ªæ•°</li>
<li>argv (argument vector): å‚æ•°åˆ—è¡¨(NULLç»“æŸ)ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>char *</code>çš„æ•°ç»„</li>
</ul></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>ç¼–è¯‘å¥½çš„Cç¨‹åºä¸ä»…å¯ä»¥â€œåŒå‡»â€è°ƒç”¨ï¼Œè¿˜å¯ä»¥ä¼ å…¥å‚æ•°</p>
<ul>
<li><code>ls -al</code></li>
<li><code>python -c 'print(2**100)'</code></li>
</ul>
<blockquote>
<p>è¿™æœ‰å•¥ç”¨ï¼Ÿ</p>
</blockquote></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c2">Cè¯­è¨€å¤ä¹ 2ï¼šå˜é‡å’Œç±»å‹</h1>
<p>ç¼–ç¨‹ = å†™â€œè¯´æ˜ä¹¦â€ï¼Œè®©ç”µè„‘â€œæŒ‰ç…§æ­¥éª¤æ‰§è¡Œâ€ã€‚å…¶ä¸­è®¡ç®—æœºåªèƒ½ç†è§£æ•°æ®å’Œæ•°æ®çš„è¿ç®—ã€‚åœ¨Cä¸­ï¼Œå±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ã€å‡½æ•°å‚æ•°ç­‰éƒ½æ˜¯æ•°æ®ã€‚</p></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>æ•°æ®éƒ½æœ‰ç±»å‹ï¼Œä»¥ä¸‹<code>argv</code>å‚æ•°éƒ½å¯ä»¥ä½œä¸º<code>main</code>çš„å‚æ•°ï¼Œå®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªäº›<code>argv</code>æ‰§è¡Œ<code>strcpy(argv[0], "a");</code>æ˜¯åˆæ³•çš„ï¼Ÿ</p>
<ol>
<li>(æ ·ä¾‹) <code>char *argv[]</code></li>
<li>(ç»å¸¸è§åˆ°çš„) <code>char **argv</code></li>
<li>(?) <code>const char *argv[]</code></li>
<li>(??) <code>char ** const argv</code></li>
<li>(???) <code>const char ** const argv</code></li>
</ol></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c21">Cè¯­è¨€å¤ä¹ 2.1ï¼šç±»å‹</h1>
<p>é™„åŠ é¢˜ï¼šè¿™æ˜¯å•¥ï¼Ÿ</p>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">signal</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">,</span> <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">func</span><span class="p">)(</span><span class="kt">int</span><span class="p">)))(</span><span class="kt">int</span><span class="p">);</span>
</pre></div>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>è¯´äººè¯ï¼š</p>
<div class="codehilite"><pre><span></span><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="kt">sig_t</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>
<span class="kt">sig_t</span> <span class="nf">signal</span><span class="p">(</span><span class="kt">int</span> <span class="n">sig</span><span class="p">,</span> <span class="kt">sig_t</span> <span class="n">func</span><span class="p">);</span>
</pre></div>


<ul>
<li>è¿™è¾ˆå­è¦é‡åˆ°è¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆçš„æƒ…å†µè¿˜æ˜¯æœ‰çš„ã€‚</li>
<li>STFW: â€œé¡ºæ—¶é’ˆæ³•åˆ™â€ã€‚</li>
</ul></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c3">Cè¯­è¨€å¤ä¹ 3ï¼šè¯­å¥</h1>
<p>å˜é‡/å‡½æ•°çš„å£°æ˜/å®šä¹‰ã€æ•°æ®ç±»å‹å®šä¹‰ã€èµ‹å€¼è¯­å¥ã€æ¡ä»¶è¯­å¥ã€å‡½æ•°è°ƒç”¨ã€å¾ªç¯ã€switch-caseã€â€¦â€¦</p>
<ul>
<li>å¥½åƒå°±æ˜¯Cè¯­è¨€çš„å…¨éƒ¨äº†</li>
<li>æˆ‘ä»¬åšçš„æ— éå°±æ˜¯æŠŠæ•°æ®ç®—å‡ºæ¥ï¼Œç®—åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼Œç„¶åæœ€åè°ƒç”¨åº“å‡½æ•°å¤„ç†ä¸€ä¸‹(æ¯”å¦‚è¾“å‡º)</li>
</ul></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>åŸåˆ™ä¸Šï¼Œç»™ä½ <code>gettime()</code>, <code>read_key()</code>å’Œ<code>draw_pixel(x, y, color)</code>ï¼Œä½ å°±èƒ½åšå„ç§ä¸œè¥¿äº†ï¼</p>
<p>quiz: å¦‚ä½•ç”¨<code>draw_pixel</code>å®ç°<code>putchar</code>ï¼Œè¿›è€Œå®ç°ï¼š</p>
<div class="codehilite"><pre><span></span><span class="kt">int</span> <span class="nf">printf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="_1">å¸¸è§çš„è¯¯è§£</h1>
<p>â€œæˆ‘ä»¬åªè¦èƒ½å†™å‡ºç¨‹åºå°±è¡Œäº†ï¼Œè¯­è¨€ç‰¹æ€§å…³æˆ‘Xäº‹ï¼â€</p></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>äº‹å®ï¼š</p>
<ol>
<li>æ€»æ˜¯å¯ä»¥ç”¨ç®€å•ç²—æš´çš„ç¼–ç¨‹æ–¹å¼å†™å‡ºæ­£ç¡®çš„ç¨‹åºã€‚</li>
<li>éšç€é¡¹ç›®çš„å¢é•¿ï¼Œè¿™ä¹ˆåšå¯èƒ½ä¼šè®©ä½ çš„ä»£ç æ·±é™·æ³¥æ½­ã€‚</li>
</ol></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>ä¸ºä»€ä¹ˆè¦å¥½å¥½å­¦ä¹ å­¦Cè¯­è¨€ï¼Ÿ</p>
<ol>
<li><strong>ç®€å•</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹åœ¨å¯æ§æ—¶é—´æˆæœ¬é‡Œå¯ä»¥ç²¾é€šçš„è¯­è¨€ã€‚</li>
<li><strong>é€šç”¨</strong>ã€‚å¤§é‡ç³»ç»Ÿæ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œä¾‹å¦‚Pythonã€‚</li>
<li><strong>å¯¹åº•å±‚æœºå™¨çš„ç²¾ç¡®æ§åˆ¶</strong>ã€‚Cè¯­è¨€å‡ ä¹å°±æ˜¯æ±‡ç¼–ï¼Œèƒ½å¤Ÿæ§åˆ¶å®ƒåœ¨æœºå™¨ä¸Šçš„è¡Œä¸ºã€‚</li>
</ol></div></div>
</section>
</section>

<section>
<div class="slide-container"><div class=""><p>class: center, middle</p>
<h1 id="_1">è¯¾å ‚å°ç»ƒä¹ </h1>
<p>ç¼–ç¨‹èƒ½åŠ›æ‘¸åº•(è¯·å¤§å®¶æ‹¿å‡ºä¸€å¼ çº¸)</p></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="yemu">è¯¾å ‚ç»ƒä¹ ï¼šYEMUå®ç°</h1>
<p>å®ç°yemu.c (è¢å¦ˆæ¨¡æ‹Ÿå™¨)ä¸­çš„<code>execute()</code>ï¼Œè¦æ±‚æ­£ç¡®æ”¯æŒæ•™ç§‘ä¹¦å›¾1.3ä¸­load, mov, add, storeæŒ‡ä»¤ã€‚<code>execute</code>æ—¶çš„PCã€å¯„å­˜å™¨ã€å†…å­˜åˆ†åˆ«æ˜¯(pc, R, M)ï¼Œæ‰§è¡ŒæŒ‡ä»¤å°†ä¼šä¿®æ”¹è¿™äº›å…¨å±€å˜é‡ã€‚</p>
<blockquote>
<p>å‰§é€ï¼šè¿™å°±æ˜¯NEMU PAçš„ç®€åŒ–ç‰ˆã€‚</p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>
<span class="cp">#define NREG 4</span>
<span class="cp">#define NMEM 16</span>
<span class="k">typedef</span> <span class="kt">uint8_t</span> <span class="n">u8</span><span class="p">;</span>
<span class="n">u8</span> <span class="n">pc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">R</span><span class="p">[</span><span class="n">NREG</span><span class="p">],</span> <span class="n">M</span><span class="p">[</span><span class="n">NMEM</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span> <span class="p">};</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">is_halt</span><span class="p">(</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]))</span> <span class="p">{</span>
    <span class="n">execute</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="1">ä»£ç ä¾‹å­1</h1>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">execute</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">R</span><span class="p">[(</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&</span> <span class="mi">3</span><span class="p">];</span>
    <span class="n">pc</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">R</span><span class="p">[(</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+=</span> <span class="n">R</span><span class="p">[</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&</span> <span class="mi">3</span><span class="p">];</span>
    <span class="n">pc</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">14</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">M</span><span class="p">[</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&</span> <span class="mh">0xf</span><span class="p">];</span> 
    <span class="n">pc</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">M</span><span class="p">[</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">]</span> <span class="o">&</span> <span class="mh">0xf</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">pc</span><span class="o">++</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="2">ä»£ç ä¾‹å­2</h1>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">execute</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">u8</span> <span class="n">inst</span> <span class="o">=</span> <span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="o">++</span><span class="p">];</span>
  <span class="n">u8</span> <span class="n">op</span> <span class="o">=</span> <span class="n">inst</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0x0</span> <span class="o">||</span> <span class="n">op</span> <span class="o">==</span> <span class="mh">0x1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">rt</span> <span class="o">=</span> <span class="p">(</span><span class="n">inst</span> <span class="o">&gt;&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&</span> <span class="mi">3</span><span class="p">,</span> <span class="n">rs</span> <span class="o">=</span> <span class="p">(</span><span class="n">inst</span> <span class="o">&</span> <span class="mi">3</span><span class="p">);</span>
    <span class="k">if</span>      <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0x0</span><span class="p">)</span> <span class="n">R</span><span class="p">[</span><span class="n">rt</span><span class="p">]</span>  <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="n">rs</span><span class="p">];</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0x1</span><span class="p">)</span> <span class="n">R</span><span class="p">[</span><span class="n">rt</span><span class="p">]</span> <span class="o">+=</span> <span class="n">R</span><span class="p">[</span><span class="n">rs</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0xe</span> <span class="o">||</span> <span class="n">op</span> <span class="o">==</span> <span class="mh">0xf</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">inst</span> <span class="o">&</span> <span class="mh">0xf</span><span class="p">;</span>
    <span class="k">if</span>      <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0xe</span><span class="p">)</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="o">=</span> <span class="n">M</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">op</span> <span class="o">==</span> <span class="mh">0xf</span><span class="p">)</span> <span class="n">M</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="3">ä»£ç ä¾‹å­3</h1>
<div class="codehilite"><pre><span></span><span class="k">typedef</span> <span class="k">union</span> <span class="n">inst</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="p">{</span> <span class="n">u8</span> <span class="nl">rs</span>  <span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nl">rt</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nl">op</span><span class="p">:</span> <span class="mi">4</span><span class="p">;</span> <span class="p">}</span> <span class="n">rtype</span><span class="p">;</span>
  <span class="k">struct</span> <span class="p">{</span> <span class="n">u8</span> <span class="nl">addr</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>        <span class="nl">op</span><span class="p">:</span> <span class="mi">4</span><span class="p">;</span> <span class="p">}</span> <span class="n">mtype</span><span class="p">;</span>
<span class="p">}</span> <span class="n">inst_t</span><span class="p">;</span>

<span class="cp">#define RTYPE(i) u8 rt = (i)-&gt;rtype.rt, rs = (i)-&gt;rtype.rs;</span>
<span class="cp">#define MTYPE(i) u8 addr = (i)-&gt;mtype.addr;</span>

<span class="kt">void</span> <span class="nf">execute</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">inst_t</span> <span class="o">*</span><span class="n">cur</span> <span class="o">=</span> <span class="p">(</span><span class="n">inst_t</span> <span class="o">*</span><span class="p">)</span><span class="o">&</span><span class="n">M</span><span class="p">[</span><span class="n">pc</span><span class="p">];</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">rtype</span><span class="p">.</span><span class="n">op</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">0</span><span class="nl">b0000</span><span class="p">:</span> <span class="p">{</span> <span class="n">RTYPE</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span> <span class="n">R</span><span class="p">[</span><span class="n">rt</span><span class="p">]</span>   <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="n">rs</span><span class="p">];</span>   <span class="n">pc</span><span class="o">++</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">case</span> <span class="mi">0</span><span class="nl">b0001</span><span class="p">:</span> <span class="p">{</span> <span class="n">RTYPE</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span> <span class="n">R</span><span class="p">[</span><span class="n">rt</span><span class="p">]</span>  <span class="o">+=</span> <span class="n">R</span><span class="p">[</span><span class="n">rs</span><span class="p">];</span>   <span class="n">pc</span><span class="o">++</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">case</span> <span class="mi">0</span><span class="nl">b1110</span><span class="p">:</span> <span class="p">{</span> <span class="n">MTYPE</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>    <span class="o">=</span> <span class="n">M</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span> <span class="n">pc</span><span class="o">++</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">case</span> <span class="mi">0</span><span class="nl">b1111</span><span class="p">:</span> <span class="p">{</span> <span class="n">MTYPE</span><span class="p">(</span><span class="n">cur</span><span class="p">);</span> <span class="n">M</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>    <span class="n">pc</span><span class="o">++</span><span class="p">;</span> <span class="k">break</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">default</span><span class="o">:</span> <span class="n">assert</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="_1">ä¸å¤šï¼Œä¹Ÿä¸å°‘</h1>
<p>å˜é‡å‘½å</p>
<ul>
<li>(æ— æ„ä¹‰) r[n] = x;</li>
<li>(å¤ªé•¿) register[register_number] = fukingly_long_variable_name;</li>
<li>(æ­£å¥½) reg[num] = alu_res;</li>
</ul>
<p>ç»™è¡¨è¾¾å¼å«ä¹‰</p>
<ul>
<li>(#1) R[(M[pc] >> 2) & 3] â†’ R[rt]</li>
</ul>
<p>ä»£ç å…‹éš†æ˜¯ç»´æŠ¤çš„å™©æ¢¦</p>
<ul>
<li>opcodeå‘ç”Ÿäº†å˜åŒ–ï¼Œ(#2) op == 0xeçš„åˆ¤æ–­ä½äºåä¸‡å…«åƒé‡Œä¹‹å¤–ï¼Œæœ‰ä¸€å¤„å¿˜è®°æ”¹äº†â€¦â€¦</li>
</ul></div></div>
</section>

<section>
<div class="slide-container"><div class="center middle"><h1 id="_1">å›å½’ç¼–ç¨‹</h1>
<p>Cè¯­è¨€å°±æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œè§„å®šå•¥æ˜¯ç¨‹åºï¼Œæ€ä¹ˆæ‰§è¡Œã€‚</p>
<p>åœ¨è¿™ä¸ªè§„èŒƒä¸‹ï¼Œæ—¢å¯ä»¥å†™å‡ºå¥½çš„ç¨‹åºï¼Œä¹Ÿå¯ä»¥å†™å‡ºç³Ÿç³•çš„ç¨‹åºã€‚</p></div></div>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c">Cè¯­è¨€ï¼šæ»¥ç”¨</h1>
<p>å„ç§Hackingï¼šå±•ç¤ºæ™ºåŠ›/æŠ€æœ¯çš„æ—¶åˆ»(<a href="http://ioccc.org">IOCCC</a>)</p>
<div class="codehilite"><pre><span></span><span class="n">main</span><span class="p">(){</span><span class="kt">char</span> <span class="n">q</span><span class="o">=</span><span class="mi">34</span><span class="p">,</span><span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="o">*</span><span class="n">a</span><span class="o">=</span><span class="s">"main(){char q=34,n=10,*a=%c%s%c;printf(a,q,a,q,n);}%c"</span><span class="p">;</span><span class="n">printf</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">n</span><span class="p">);}</span>
</pre></div>

<p>ä»»ä½•Turing-Completeçš„è¯­è¨€éƒ½æœ‰è¿™æ ·çš„fixed-pointã€‚</p>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>ä½†å¦‚æœè¦åšä¸ªå¤§ç¨‹åºï¼Œè¿™ä¸€èˆ¬å°±ä¸çµäº†ï¼Œå¯¹åˆå­¦è€…å°±æ›´ä¸çµäº†ã€‚</p>
<ul>
<li>è½¯ä»¶å·¥ç¨‹ï¼šè®©å‚»(æ–°)å­(æ‰‹)ä¹Ÿèƒ½ç¼–å¯¹ç¨‹ï¼Œç¼–å¥½ç¨‹</li>
<li>ä»æ­¤ç¼–ç¨‹ä¸å†æ˜¯æ™ºè€…çš„ä¸“é•¿ğŸ˜­</li>
</ul></div></div>
</section>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="_1">ç¼–ç¨‹çš„æœ¬è´¨</h1>
<blockquote>
<p>Programs are meant to be read by humans and only incidentally for computers to execute. â€” <em>D. E. Knuth</em></p>
<p>(ç¨‹åºé¦–å…ˆæ˜¯æ‹¿ç»™äººè¯»çš„ï¼Œå…¶æ¬¡æ‰æ˜¯è¢«æœºå™¨æ‰§è¡Œã€‚)</p>
</blockquote>
<p>å› æ­¤å¥½çš„ç¨‹åºï¼š</p>
<ul>
<li>ä¸è¨€è‡ªæ˜ï¼šèƒ½ç«‹å³çŸ¥é“æ˜¯åšä»€ä¹ˆçš„ï¼Œå³<em>specification</em>
    > å› æ­¤ä»£ç <strong>é£æ ¼</strong>å¾ˆé‡è¦</li>
<li>ä¸è¨€è‡ªè¯ï¼šèƒ½ç«‹å³ç¡®è®¤ä»£ç å’Œspecificationæ˜¯ä¸€è‡´çš„    > å› æ­¤ä»£ç ä¸­å¯è¯»çš„<strong>é€»è¾‘æµ</strong>å¾ˆé‡è¦</li>
</ul>
<p>(è®©æˆ‘ä»¬å›åˆ°ä¹‹å‰çš„yemu)</p></div></div>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="c">Cè¯­è¨€ï¼šè€ç å†œçš„å®è·µ</h1>
<p>çŸ¥é“ä»€ä¹ˆèƒ½åšã€ä»€ä¹ˆä¸èƒ½åšã€‚</p>
<ul>
<li><code>(i++) + (++i)</code> (<em>Unspecified</em> Behavior, C99 6.5.2.2 #10)</li>
<li><code>INT_MAX + 1</code> (<em>Undefined</em> Behavior, C99 6.5.6 #8)</li>
</ul>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>å†™å‡ºæ­£ç¡®ã€æ›´ä¼˜ç¾ã€æ˜“è¯»ã€æ˜“è¯æ˜çš„ä»£ç * äºŒè¿›åˆ¶å¸¸é‡ (<code>0b0001</code>ï¼Œæ¯”åå…­è¿›åˆ¶è‚‰çœ¼å‹å¥½ä¸€äº›)
* bitfields (<code>struct { u8 rs: 2, rt: 2, op: 4 };</code>) 
* union (<code>union { ...rtype; ...mtype; };</code>)
* ç±»å‹è½¬æ¢ (<code>(inst_t *)&M[pc]</code>)
* é¢„ç¼–è¯‘æŒ‡ä»¤ (<code>#define</code>ï¼Œä¸€ä¼šå„¿è¿˜ä¼šçœ‹åˆ°)</p></div></div>
</section>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="_1">æœ€é‡è¦çš„äº‹æƒ…è¯´ä¸‰é</h1>
<p>ä»£ç å†™å¾—å†å¥½ä¹Ÿä¼šæœ‰bug (æ¯”å¦‚æŠŠ<em>i</em>æ‰“æˆäº†<em>j</em>) * 3</p>
<ul>
<li>Linux Kernel, GCC, ... åˆ°å¤„éƒ½æ˜¯bug</li>
<li>(ç›®å‰æˆ‘ä»¬çš„ç ”ç©¶å…³æ³¨æ€ä¹ˆç»™è¿™äº›è½¯ä»¶æ‰¾bug)</li>
</ul>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p><strong>æ­£ç¡®æ€§</strong>ï¼šä»£ç çš„è¡Œä¸ºä¸ç¨‹åºçš„è§„çº¦(specification)ä¸€è‡´</p>
<ul>
<li>ä½†æœ‰æ—¶å€™è‡ªå·±ä¹Ÿè¯´ä¸æ¸…specification</li>
<li>è‡³å°‘é€šè¿‡æµ‹è¯•ç»™æˆ‘ä»¬ä¸€äº›ä¿¡å¿ƒå§</li>
<li>OJå·²ç»è®©ä½ ä»¬ä½“ä¼šåˆ°æ­£ç¡®æ€§çš„é‡è¦æ€§(å·®ä¸€ç‚¹éƒ½wa)ï¼ŒICSæ›´æ˜¯è¿™æ ·ï¼šæŒ‡ä»¤å¦‚æœå®ç°æœ‰è¯¯ï¼Œå¤§ç¨‹åºåŸºæœ¬è·‘ä¸èµ·æ¥ã€‚</li>
</ul></div></div>
</section>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="_1">æµ‹è¯•</h1>
<blockquote>
<p>(IEEE 610, Software Engineering Terminology): The process of operating a system or componentunder specified conditions, observing or recording the results,and making an evaluation of some aspect of the system or component.</p>
<p>(IEEE 892): The process of analyzing a software item to detect the difference between existing and required conditions (that is, bugs) and to evaluate the features of the software items.</p>
<p>(BS 7925-1, Software Testing-Vocabulary): Process of exercising software to verify that it satisfies requirements and to detect errors.</p>
</blockquote>
<p>è¯´ç™½äº†å°±æ˜¯â€œæ‹‰å‡ºå»æºœæºœâ€ï¼Œçœ‹æ˜¯ä¸æ˜¯å’Œé¢„æœŸä¸€è‡´ã€‚</p></div></div>
</section>

<section>
<section>
<div class="slide-container"><div class=""><h1 id="yemu">å®æˆ˜ï¼šæµ‹è¯•yemu</h1>
<p>å·²ç»å°½ä½ æ‰€èƒ½å®ç°å¥½äº†yemuï¼Œä¸è¿‡æ€ä¹ˆå¢åŠ ä½ å¯¹ä»£ç çš„ä¿¡å¿ƒå‘¢ï¼Ÿ</p>
<ul>
<li><strike>é¢å‘OJç¼–ç¨‹ï¼šç®¡ä»–å‘¢ï¼Œæ ·ä¾‹å¯¹äº†çœ‹ç€æ²¡æ¯›ç—…ï¼Œå…ˆäº¤ä¸ºæ•¬ã€‚</strike></li>
<li>æ€ä¹ˆåˆWrong Answer/Runtime Error/...äº†ï¼Ÿ</li>
</ul>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>æ€æ ·æµ‹è¯•ä½ å®ç°çš„yemuï¼Ÿ</p>
<ul>
<li><a href="../static/wiki/ics/2018/files/yemutest.c">ä¸€ä¸ªç®€æ˜“yemuæµ‹è¯•æ¡†æ¶</a></li>
<li>ç»™æˆ‘ä»¬çš„ä¿¡å¿ƒï¼šåœ¨éšæœºçš„å¯„å­˜å™¨/å†…å­˜å€¼ä¸Šï¼Œæ‰§è¡Œå•æ¡æŒ‡ä»¤çš„è¡Œä¸ºè¡¨ç°å¾—å’Œæˆ‘ä»¬å†™å‡ºçš„æ–­è¨€ä¸€è‡´</li>
</ul>
<div class="fragment">

</div></div></div>
</section>
<section>
<div class="slide-container"><div class=""><p>å¯¹äºNEMUï¼Œä½ ä»¬ä¼šé‡åˆ°æµ‹è¯•å™©æ¢¦çš„</p>
<ul>
<li>å¬è¯´è¿‡differential testingï¼Ÿå…¶å®æˆ‘è§‰å¾—æŠŠå®ƒä»PAé‡Œå»æ‰æ¯”è¾ƒå¥½ã€‚</li>
</ul></div></div>
</section>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="_1">æ¨èçš„å‚è€ƒä¹¦</h1>
<p>(å¤§éƒ¨åˆ†æˆ‘éƒ½è¯»è¿‡ï¼Œå‰©ä¸‹å°‘éƒ¨åˆ†ä¹Ÿç¿»è¿‡ï¼Œå“è´¨ä¿è¯)</p>
<ul>
<li>Brian W. Kernighan and Dennis M. Ritchie. The C Programming Language (æ•™ç§‘ä¹¦)</li>
<li>Peter van der Linden. Expert C Programming: Deep C Secrets (å½“é—²ä¹¦çœ‹ä¸é”™)</li>
<li>Andrew Koenig. C Traps and Pitfalls (ä¹Ÿæ˜¯é—²ä¹¦)</li>
<li>Axel-Tobias Schreiner. Object-Oriented Programming with ANSI-C (æˆ‘è§‰å¾—æœ‰ç‚¹æç¬‘çš„é—²ä¹¦ï¼Œä½†æœ‰ä¸å°‘æœ‰ç”¨çš„ç¼–ç¨‹æŠ€å·§)</li>
<li>Robert C. Seacord. The Cert C Coding Standard (ç¼–ç å®è·µï¼Œè€Œä¸”å¯¹æ–°æ ‡å‡†è¦†ç›–åº¦æ¯”è¾ƒé«˜)</li>
<li>C99/C11 Specification (æœ€è¯¦å°½ï¼Œæœ€éš¾è¯»ï¼Œç¼ºå°‘è§£é‡Š)</li>
</ul></div></div>
</section>

<section>
<div class="slide-container"><div class=""><h1 id="_1">æ¨èçš„å‚è€ƒä»£ç </h1>
<p>äº’è”ç½‘åšå®¢/é—®ç­”</p>
<ul>
<li>ğŸš« ä¸æ¨èCSDN/cnblogs/...çš„ä»£ç  (å‚å·®ä¸é½)</li>
<li>âœ… Stackoverflowä¸Šçš„é«˜ç¥¨å›ç­”</li>
</ul>
<p>å‚è€ƒä»£ç  (RTFSC)</p>
<ul>
<li>æš‚æ—¶æ²¡æœ‰æƒ³åˆ°å¥½çš„ICSå‚è€ƒä»£ç ã€‚æƒ³åˆ°å¯ä»¥å‘Šè¯‰æˆ‘ã€‚QEMUå¥½åƒå¤ªå¤æ‚äº†ç‚¹ã€‚</li>
<li>OSè¯¾çš„å‚è€ƒä»£ç ï¼šbusybox (æœ¬è¯¾ç¨‹ä¹Ÿæ¨è), newlib, xv6 (è¿›é˜¶)<ul>
<li>å°±åƒå¤§å®¶éƒ½å–œæ¬¢æŠŠæ¯å¤©èº«è¾¹ç”¨çš„ä¸œè¥¿æ‹†äº†çœ‹çœ‹æ€ä¹ˆå·¥ä½œçš„ï¼Œbusyboxå°±æ˜¯ä¸ªä¸é”™çš„ç®€åŒ–ç‰ˆ</li>
</ul>
</li>
</ul></div></div>
</section>
  </div>
</div>

<script src="../static/js/reveal.js"></script>
<script>
  slide_num = -1;
  function update_slide_num(n) {
    if (slide_num == -1) {
      setTimeout(function() {
        if (slide_num != -1) {
          while (!Reveal.isFirstSlide()) {
            Reveal.prev();
          }
          while (Reveal.getSlidePastCount() + 1 < slide_num && !Reveal.isLastSlide()) {
            Reveal.next();
          }
          slide_num = -1;
        }
      }, 500);
      slide_num = 0;
    }
    slide_num = slide_num * 10 + n;
  }

  Reveal.initialize({
    width: 1024,
    height: 768,
    margin: 0,
    slideNumber: 'c/t',
    controls: true,
    progress: false,
    maxScale: 10,
    fragments: true,
    hash: true,
    transition: 'slide',
    transitionSpeed: 'fast',
    backgroundTransition: 'slide',
    hideCursorTime: 1000,
    navigationMode: 'default',
    keyboard: {
      13: 'next',
      48: function() { update_slide_num(0) },
      49: function() { update_slide_num(1) },
      50: function() { update_slide_num(2) },
      51: function() { update_slide_num(3) },
      52: function() { update_slide_num(4) },
      53: function() { update_slide_num(5) },
      54: function() { update_slide_num(6) },
      55: function() { update_slide_num(7) },
      56: function() { update_slide_num(8) },
      57: function() { update_slide_num(9) },
    }
  });
</script>



    <script>
      $(function () {
        $('[data-toggle="tooltip"]').tooltip()
      })

      $("math").each(function() {
        var tex = $(this).text();
        var html = katex.renderToString(tex, {
          displayMode: $(this).attr('class') == 'block-math',
          throwOnError: false
        });
        $(this).replaceWith(html);
      });

      function get_token() {
        var match = document.cookie.match(new RegExp('(^| )token=([^;]+)'));
        if (match) return match[2];
        else return "";
      }

      var token = get_token();
      var hint = "token", box = $("#token-input");

      if (token == "") { box.val(hint); }
      else { box.val(token); }

      function login() {
        var token = box.val()
        document.cookie = 'token=' + token + '; expires=Fri, 31 Dec 9999 23:59:59 GMT;';
        if (token == '') {
          box.val(hint);
        }
      }
    </script>
  </body>
</html>